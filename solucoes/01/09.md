## Problema

9 - Cria uma classe chamada `Checker` com um único método de nome `Check()`.
Este método recebe dois argumentos: 1) um _array_ bidimensional de `int`; e, 2)
um `int`. O método retorna `true` caso encontre uma linha (horizontal, vertical
ou diagonal) de quatro ou mais inteiros iguais ao 2º argumento, ou `false`
caso contrário.

Adiciona o método estático `Main()` à classe `Checker`. Este método deve: 1)
solicitar ao utilizador as dimensões do _array_; 2) solicitar ao utilizador os
valores do _array_; 3) solicitar ao utilizador o valor a procurar no
_array_; 4) criar uma nova instância de `Checker`; 5) invocar o respetivo
método `Check()` para verificar se o valor a procurar no _array_ aparece em
forma uma linha com comprimento igual ou maior a quatro; e, 6) indicar no ecrã
se essa linha existe ou não.


## Soluções

### Solução 1

Class Checker:

```csharp
using System;

namespace Exercise09
{
    class Checker
    {
        static void Main(string[] args)
        {
            string errorMsg = null;
            int?[,] matrix = null;
            int? key = null;
            Checker checker;

            while (matrix == null)
            {
                string[] splitHolder;

                Console.Clear();

                if (!string.IsNullOrEmpty(errorMsg))
                    Console.WriteLine($"Error: {errorMsg}");

                Console.Write("Size? Type ROWSxCOLUMNS > ");

                splitHolder = Console.ReadLine().Split('x');

                if (splitHolder.Length != 2)
                {
                    errorMsg = "Wrong input. Follow instructions.";
                }
                else if (int.TryParse(splitHolder[0], out int rows) &&
                    int.TryParse(splitHolder[1], out int columns))
                {
                    if (rows < 4 && columns < 4)
                    {
                        errorMsg = "Minimum size is 4x4";
                    }
                    else
                    {
                        matrix = new int?[rows, columns];
                    }
                }
                else
                {
                    errorMsg = "Values must be integer values.";
                }
            }

            PromptMatrixValues(matrix);

            errorMsg = null;
            while (key == null)
            {
                string input;

                Console.Clear();

                if (!string.IsNullOrEmpty(errorMsg))
                    Console.WriteLine($"Error: {errorMsg}");

                Console.Write("What value to look for? > ");

                input = Console.ReadLine();

                if (int.TryParse(input, out int x))
                {
                    key = x;
                }
                else
                {
                    errorMsg = "Value must be a number.";
                }
            }

            PrintMatrix(matrix);

            Console.CursorTop += 1;

            checker = new Checker();

            if(checker.Check(matrix, key.Value))
                Console.WriteLine($"A line of {key} exists!");
            else
                Console.WriteLine($"Couldn't find a line of {key}...");
        }

        private bool Check(int?[,] matrix, int key)
        {
            int columns = matrix.GetLength(1);
            int rows = matrix.GetLength(0);

            for (int i = 0; i < rows; i++)
            {
                for (int j = 0; j < columns; j++)
                {
                    if (matrix[i, j].Value != key)
                        continue;

                    if (CheckLines(matrix, index: new Pos(i, j), key))
                        return true;
                }
            }

            return false;
        }

        // Checks lines from given index
        private bool CheckLines(int?[,] matrix, Pos index, int key)
        {
            int count = 0;
            int columns = matrix.GetLength(1);
            int rows = matrix.GetLength(0);
            bool hasColumnSpace = columns - 4 >= index.Column;
            bool hasRowSpace = rows - 4 >= index.Row;

            // Check right
            for (int i = index.Column; hasColumnSpace; i++)
            {
                if (key == matrix[index.Row, i].Value)
                {
                    count++;

                    if (count >= 4)
                    {
                        return true;
                    }
                }
                else
                {
                    count = 0;
                    break;
                }
            }

            // Check down
            for (int i = index.Row; hasRowSpace; i++)
            {
                if (key == matrix[i, index.Column].Value)
                {
                    count++;

                    if (count >= 4)
                    {
                        return true;
                    }
                }
                else
                {
                    count = 0;
                    break;
                }
            }

            // Check diagonal down right
            for (int i = index.Row, k = index.Column; hasColumnSpace && hasRowSpace; i++, k++)
            {
                if (key == matrix[i, k].Value)
                {
                    count++;

                    if (count >= 4)
                    {
                        return true;
                    }
                }
                else
                {
                    count = 0;
                    break;
                }
            }

            // Check diagonal up right
            for (int i = index.Row, k = index.Column; index.Row >= 3 && hasColumnSpace; i--, k++)
            {
                if (key == matrix[i, k].Value)
                {
                    count++;

                    if (count >= 4)
                    {
                        return true;
                    }
                }
                else
                    break;
            }

            return false;
        }

        // Checks if every value in matrix is set
        private static bool IsMatrixFull(int?[,] matrix)
        {
            int columns = matrix.GetLength(1);
            int rows = matrix.GetLength(0);

            for (int i = 0; i < rows; i++)
            {
                for (int j = 0; j < columns; j++)
                {
                    if (!matrix[i, j].HasValue)
                        return false;
                }
            }

            return true;
        }

        // Prints matrix to console
        private static void PrintMatrix(int?[,] matrix)
        {
            int columns = matrix.GetLength(1);
            int rows = matrix.GetLength(0);

            Console.Clear();

            for (int i = 0; i < rows; i++)
            {
                for (int j = 0; j < columns; j++)
                {
                    if (!matrix[i, j].HasValue)
                        Console.Write($"\tA{i + 1}{j + 1}");
                    else
                        Console.Write($"\t{matrix[i, j].Value}");
                }

                Console.CursorTop += 1;
                Console.CursorLeft = 0;
            }
        }

        // Recursive method to set matrix's values
        private static void PromptMatrixValues(int?[,] matrix)
        {
            int columns = matrix.GetLength(1);
            int rows = matrix.GetLength(0);

            while (!IsMatrixFull(matrix))
            {
                Console.Clear();

                PrintMatrix(matrix);

                Console.CursorTop += 1;

                for (int i = 0; i < rows; i++)
                {
                    for (int k = 0; k < columns; k++)
                    {
                        if (matrix[i, k].HasValue)
                            continue;

                        Console.Write($"Set A{i + 1}{k + 1}: ");

                        if (int.TryParse(Console.ReadLine(), out int value))
                            matrix[i, k] = value;

                        PromptMatrixValues(matrix);
                    }
                }
            }
        }
    }
}
```

Struct Pos:

```csharp
namespace Exercise09
{
    public struct Pos
    {
        public int Row { get; }
        public int Column { get; }

        public Pos(int row, int column)
        {
            Row = row;
            Column = column;
        }
    }
}
```

*Por [Pedro Dias Marques](https://github.com/p-marques)*

### Solução 2

```cs
using System;

namespace Ex9
{
    class Checker
    {
        static void Main(string[] args)
        {
            int[,] n;
            int x, y, v;
            Checker ck = new Checker();
            bool tf;
            //Input sobre o valor a procurar e as dimenções do array.
            Console.WriteLine("Linhas: ");
            x = Int32.Parse(Console.ReadLine());
            Console.WriteLine("Colunas: ");
            y = Int32.Parse(Console.ReadLine());
            Console.WriteLine("Valor que procura: ");
            v = Int32.Parse(Console.ReadLine());

            //Input dos valores do array
            n = new int[x, y];
            for(int i= 0; i < x; i++)
            {
                Console.WriteLine("Linha {0}", i+1);
                for(int j = 0; j < y; j++)
                {
                    int temp;
                    Console.WriteLine("Coluna {0}", j+1);
                    temp = Int32.Parse(Console.ReadLine());
                    n[i,j] = temp;
                }
            }
            tf = ck.Check(n, v);
            Console.WriteLine(tf);

        }

        public bool Check(int[,] xy, int n)
        {
            for(int i = 0; i < xy.GetLength(0); i++)
            {
                for(int j = 0; j < xy.GetLength(1); j++)
                {
                    //verifica as linhas.
                    if(xy.GetLength(1) >= 4 && j < xy.GetLength(1)-3)
                    {
                        if(xy[i,j] == n && xy[i,j] == xy[i,j+1] && xy[i,j] == 
                            xy[i,j+2]&& xy[i,j] == xy[i,j+3])
                        {
                            return true;
                        }
                    }
                    //verifica as Colunas.
                    if (xy.GetLength(0) >= 4 && i < xy.GetLength(0)-3)
                    {
                        if(xy[i,j] == n && xy[i,j] == xy[i+1,j] && xy[i,j] == 
                            xy[i+2,j] && xy[i,j] == xy[i+3,j])
                        {
                            return true;
                        }
                    }

                    //verifica as Diagonais.
                    if(xy.GetLength(0) >= 4 && xy.GetLength(1) >= 4 &&
                        i < xy.GetLength(0)-3 && j < xy.GetLength(1)-3)
                    {
                        if(xy[i,j] == n && xy[i,j] == xy[i+1,j+1] && xy[i,j] == 
                            xy[i+2,j+2]&& xy[i,j] == xy[i+3,j+3])
                        {
                            return true;
                        }
                    }
                    if(xy.GetLength(0) >= 4 && xy.GetLength(1) >= 4 &&
                        i < xy.GetLength(0)-3 && j > xy.GetLength(1)-3)
                    {
                        if(xy[i,j] == n && xy[i,j] == xy[i+1,j-1] && xy[i,j] == 
                            xy[i+2,j-2]&& xy[i,j] == xy[i+3,j-3])
                        {
                            return true;
                        }
                    }
                    
                }   
            }
            return false;
        }
    }
}
```
*Por [Nelson Salvador](https://github.com/NelsonSalvador)*



### Solução 3

Class Checker:

```csharp
using System;

namespace _01_09
{
    class Checker
    {
        private static void Main(string[] args) {
            // Input do user
            string userInput;

            // Número de linhas da array
            int arrayLines = 0;

            // Número de colunas da array
            int arrayColumns = 0;

            // Array final
            float[,] values;

            // Nova instância de Checker
            Checker _check;

            // Verificar se o número de linhas da matriz está definido
            bool isMatrixLine = false;

            // Verificar se o número de colunas da matriz está definido
            bool isMatrixColumn = false;

            // Verificar se os elementos estão preenchidos
            bool isValue = false;

            // O valor do input do user
            float value = 0;

            // Definir o número de linhas
            while (isMatrixLine == false) {
                Console.WriteLine("Qual é o número de linhas da matriz?");
                // User Input
                userInput = Console.ReadLine();

                // Tentar convertar o input para int
                if (Int32.TryParse(userInput, out arrayLines)) {
                    // Verificar se o número de linhas não é zero ou negativo.
                    if (arrayLines >= 1) {
                        isMatrixLine = true;
                    }
                    else {
                        Console.WriteLine("Valor inválido, tente de novo.");
                    }
                } else {
                    Console.WriteLine("Valor inválido, tente de novo.");
                }

            }

            // Definir o número de linhas
            while (isMatrixColumn == false) {
                Console.WriteLine("Qual é o número de colunas da matriz?");
                // User Input
                userInput = Console.ReadLine();

                // Tentar convertar o input para int
                if (Int32.TryParse(userInput, out arrayColumns)) {
                    // Verificar se o número de colunas não é zero ou negativo.
                    if (arrayColumns >= 1) {
                        isMatrixColumn = true;
                    } else {
                        Console.WriteLine("Valor inválido, tente de novo.");
                    }
                } else {
                    Console.WriteLine("Valor inválido, tente de novo.");
                }

            }

            // Definir o tamanho da array values
            values = new float[arrayLines, arrayColumns];

            Console.WriteLine($"Tem {arrayLines * arrayColumns} slots");
            // Pedir os valores e colocar na array values
            while (isValue == false) {
                for (int x = 0; x < arrayLines; x++) {
                    for (int y = 0; y < arrayColumns; y++) {
                        while (value == 0) {
                            Console.WriteLine($"Insere um valor na" +
                                $" linha {x + 1} na coluna {y + 1}");
                            // Input do user
                            userInput = Console.ReadLine();

                            /* Tentar converter o input para float
                             * e colocar na array */
                            if (float.TryParse(userInput, out value)) {
                                values[x, y] = value;
                                PrintArray(values);

                            } else {
                                Console.WriteLine
                                    ("Valor inválido, tente de novo");
                            }
                        }
                        value = default;
                    }
                    isValue = true;
                }
            }

            Console.WriteLine("Qual é o valor que quer procurar?");
            // Input do user
            userInput = Console.ReadLine();


            // Verificar se o método Check() retoma true
            //_check = new Checker(values, userInput);
            _check = new Checker();


            // Mostrar a array
            PrintArray(values);


            if (_check.Check(values, float.Parse(userInput))) {
                Console.WriteLine("Existe linha");
            } else {
                Console.WriteLine("Não existe linha");
            }
        }
        /* Método para verificar se a array contêm uma linha com
         * quatro ou mais valores seguidos iguais aos que o user pede
         * para procurar.
         * Retoma true se encontrar.
         */
        private bool Check(float[,] x, float ui) {
            // Contar a quantidade de valores seguidos na array x
            int sum = 0;

            int index = 0;

            // Verificar se tem quatro valores seguidos
            bool isFour = false;


            // Verificar linhas horizontais
            for (int n = 0; n < x.GetLength(0); n++) {
                // Retoma a zero quando começa
                sum = default;

                for (int j = 0; j < x.GetLength(1); j++) {
                    /* Verificar se existe um valor igual ao que
                     * o user escolheu */
                    if (x[n, j] == ui) {
                        // Incrementa se for igual
                        sum++;
                    }
                    else if (x[n, j] != ui) {
                        // Descrementa se não for igual
                        sum--;
                    }
                }

                // Verificar se existe quatro números seguidos
                if (sum >= 4) {
                    isFour = true;
                }
            }

            sum = default;

            /// Verificar linhas verticais 
            for (int j = 0; j < x.GetLength(1); j++) {
                // Retoma a zero quando começa
                sum = default;

                for (int n = 0; n < x.GetLength(0); n++) {
                    /* Verificar se existe um valor igual ao que o 
                     * user escolheu */
                    if (x[n, j] == ui) {
                        // Incrementa se for igual
                        sum++;
                    }
                    else if (x[n, j] != ui) {
                        // Descrementa se não for igual
                        sum--;
                    }
                }
                // Verificar se existe quatro números seguidos
                if (sum >= 4) {
                    isFour = true;
                }
            }

            sum = default;

            /* Verificar linhas diagonais cima para baixo, 
             * esquerda para direita */
            if (x.GetLength(0) == x.GetLength(1)) {
                for (int n = 0; n < 1; n++) {
                    for (int z = 0; z < x.GetLength(0); z++) {
                        /* Verificar se existe um valor igual ao que o
                         * user escolheu */
                        if (x[z, z] == ui) {
                            // Incrementa se for igual
                            sum++;
                        } else if (x[z, z] != ui) {
                            // Descrementa se não for igual
                            sum--;
                        }

                        // Verificar se existe quatro números seguidos
                        if (sum >= 4) {
                            isFour = true;
                        }
                    }
                }
            }

            // Retomar a soma a zero
            sum = default;

            /* Verificar linhas diagonais cima para baixo, direita para 
            esquerda*/
            if (x.GetLength(0) == x.GetLength(1)) {
                for (int n = 0; n < 1; n++) {
                    for (int j = x.GetLength(1) - 1; j >= 0; j--) {
                        /* Verificar se existe um valor igual ao que o user 
                        escolheu*/
                        // Incrementa se for igual
                        if (x[index, j] == ui) {
                            sum++;
                        }
                        // Descrementa se não for igual
                        else if (x[index, j] != ui) {
                            sum--;
                        }

                        // Verificar se existe quatro números seguidos
                        if (sum >= 4) {
                            isFour = true;
                        }
                        index++;
                    }
                }
            }

            // Verificar se foi encontrado quatro valores seguidos 
            if (isFour == true) {
                return true;
            } else {
                return false;
            }
        }
        // Método para mostrar a array
        private static void PrintArray(float[,] val) {
            // Tamanho da linha
            int rowLength = val.GetLength(0);

            // Tamanho da coluna
            int colLength = val.GetLength(1);

            // Mostrar a array:
            string arrayString = "";

            for (int i = 0; i < rowLength; i++) {
                for (int j = 0; j < colLength; j++) {
                    // Colocar os valores da array
                    arrayString += string.Format("{0} ", val[i, j]);
                }
                // Colocar nova linha
                arrayString += System.Environment.NewLine +
                    System.Environment.NewLine;
            }
            // Mostrar a array
            Console.WriteLine(arrayString);
        }
    }
}

```

*Por [Francisco Pires](https://github.com/FRP7)*