## Problema
14 - Considera o seguinte tipo:

```cs
public struct GameMap
{
    private float topScore;
    private int gamesPlayed;
    private int gamesWon;

    public string Name { get; }
    public string Filename { get; }
    public float SuccessRate
    {
        get {
            if (gamesPlayed == 0)
                return 0f;
            else
                return gamesWon / (float) gamesPlayed;
        }
    }
    public float TopScore {
        get
        {
            return topScore;
        }
        set
        {
            if (value > topScore)
            {
                topScore = value;
            }
        }
    }

    public GameMap(string name, string filename)
    {
        Name = name;
        Filename = filename;
        gamesPlayed = 0;
        gamesWon = 0;
        topScore = 0;
    }

    public void GamePlayed(bool won)
    {
        gamesPlayed++;
        if (won)
        {
            gamesWon++;
        }
    }
}
```

Responde às seguintes questões relativas ao tipo apresentado:

1. O tipo apresentado é de valor ou referência? Justifica a tua resposta.
2. Identifica as variáveis de instância e explica o seu propósito.
3. Identifica as propriedades auto-implementadas.
4. Identifica as propriedades só de leitura.
5. Identifica os construtores.
6. Identifica os métodos de instância.
7. Escreve a documentação XML apropriada para a classe e respetivos membros.
8. Escreve um método `static` que recebe um iterável de `GameMap` e imprime
   uma tabela bem formatada com informação sobre os mesmos, tal como
   representado na seguinte figura:

```text
Name              Filename      Sucess Rate    Top Score
--------------------------------------------------------
Hell              hell.map           30.2 %     5069.921
Beach             beach.map          44.0 %     2231.887
Valley            valley.map         72.1 %      131.090
Work              work.map           44.4 %     2334.114
School            school.map         11.5 %       40.587
Graveyard         graveyard.map      69.8 %     1631.103
Mars              mars.map           92.1 %     2257.178
```

## Soluções

### Solução 1

1. O tipo é de valor devido a se tratar de uma `struct`.
2. Variáveis de instância:
   1. `topScore` - guarda o valor da melhor pontuação
   2. `gamesPlayed` - guarda o número de jogos jogados
   3. `gamesWon` - guarda o número de jogos ganhos 
3. `Name` , `Filename`
4. `Name` , `Filename` & `SuccessRate`
5. `GameMap(string name, string filename)`
6. `GamePlayed(bool won)`
7. 

```cs
namespace test
{
    /// <summary>
    /// Contém e atualiza as várias variáveis do mapa de jogo
    /// </summary>
    public struct GameMap
    {
        /// <summary>
        /// Valor da melhor pontuação.
        /// </summary>
        private float topScore;

        /// <summary>
        /// Número de jogos jogados.
        /// </summary>
        private int gamesPlayed;

        /// <summary>
        /// Número de jogos ganhos.
        /// </summary>
        private int gamesWon;

        /// <summary>
        /// Nome do Mapa.
        /// </summary>
        public string Name { get; }

        /// <summary>
        /// Nome do ficheiro.
        /// </summary>
        public string Filename { get; }

        /// <summary>
        /// Percentagem de sucesso.
        /// </summary>
        public float SuccessRate
        {
            get {
                if (gamesPlayed == 0)
                    return 0f;
                else
                    return gamesWon / (float) gamesPlayed;
            }
        }
        /// <summary>
        /// Propriedade que altera a variavel de suporte topscore.
        /// </summary>
        public float TopScore {
            get
            {
                return topScore;
            }
            set
            {
                if (value > topScore)
                {
                    topScore = value;
                }
            }
        }

        /// <summary>
        /// Construtor da struct, inicializa um novo GameMap.
        /// </summary>
        /// <param name="name">Nome do mapa.</param>
        /// <param name="filename">Nome do ficheiro.</param>
        public GameMap(string name, string filename)
        {
            Name = name;
            Filename = filename;
            gamesPlayed = 0;
            gamesWon = 0;
            topScore = 0;
        }

        /// <summary>
        /// Metodo que atualiza os jogos jogados e jogos ganhos.
        /// </summary>
        /// <param name="won">Vitória = True; Derrota = False;</param>
        public void GamePlayed(bool won)
        {
            gamesPlayed++;
            if (won)
            {
                gamesWon++;
            }
        }
    }
}
```
8. 

```cs
public static void PrintTable(GameMap[] gamemap)
{
    Console.WriteLine("Name              Filename      Sucess Rate    ToScore");
    Console.WriteLine("--------------------------------------------------------");
    
    for(int i = 0; i < gamemap.Length; i++)
    {
        Console.Write("{0,-17}",gamemap[i].Name);
        Console.Write("{0,-15}",gamemap[i].Filename);
        Console.Write("{0,10:p1}", gamemap[i].SuccessRate);
        Console.Write("{0,14:F3}\n",gamemap[i].TopScore);
    }
    
}
```
*Por [Nelson Salvador](https://github.com/NelsonSalvador)*


### Solução 2

1. É de valor, as structs são tipos de valor aliás, variáveis como o int ou float são structs.
2. `topScore` : Obter o valor da score mais alta
`gamesPlayed`: Obter o número de jogos jogados
`gamesWon`: Obter o número de jogos ganhos

3. `Name` , `Filename` , `SuccessRate`, `Top Score`
4. `Name` , `Filename` , `SuccessRate`
5. `GameMap`
6. `GamePlayed`



7.

```cs
using System;

namespace GameMap
{
    public struct GameMap
    {
        // Variável da score mais alta.
        private float topScore;
        //
        // Variável do número de jogos jogados.
        private int gamesPlayed;
        //
        // Variável do número de jogos ganhos.
        private int gamesWon;
        //

        // Variável de leitura (excepto no construtor) do nome do mapa.
        public string Name { get; }
        //
        // Variável de leitura (excepto no construtor) de nome de ficheiro.
        public string Filename { get; }
        //

        // Variável de leitura da percentagem de sucesso.
        public float SuccessRate {
            get {
                if (gamesPlayed == 0)
                    return 0f;
                else
                    return gamesWon / (float)gamesPlayed;
            }
        }
        //

        // Variável do score mais alto
        public float TopScore {
            get {
                return topScore;
            }
            set {
                if (value > topScore) {
                    topScore = value;
                }
            }
        }
        //

        // Construtor que cria objecto e define os valores das variáveis.
        /// <param name="name">Nome do mapa.</param>
        /// /// <param name="filename">Nome do ficheiro.</param>
        public GameMap(string name, string filename) {
            Name = name;
            Filename = filename;
            gamesPlayed = 0;
            gamesWon = 0;
            topScore = 0;
        }
        //

        // Método que verifica se ganhou o jogo
        /// <param name="won">Bool que verifica se ganhou o jogo</param>
        public void GamePlayed(bool won) {
            gamesPlayed++;
            if (won) {
                gamesWon++;
            }
        }
        //
    }
}

```
8. 

```cs
using System;

namespace GameMap
{
    class Program
    {
        // Variável que acede ao GameMap;
        private static GameMap _gamemap;
        //
        // Array de mapas
        private static GameMap[] gamemaparray = new GameMap[5];
        //

        static void Main(string[] args) {
            // Construir mapas e adicionar ao array
            /// <param name="name">Nome do mapa.</param>
            /// /// <param name="filename">Nome do ficheiro.</param>
            gamemaparray[0] = new GameMap
                (name: "Earth", filename: "earth.map");
            gamemaparray[1] = new GameMap
              (name: "Moon", filename: "moon.map");
            gamemaparray[2] = new GameMap
              (name: "Mars", filename: "mars.map");
            gamemaparray[3] = new GameMap
              (name: "Jupiter", filename: "Jupiter.map");
            gamemaparray[4] = new GameMap
              (name: "Uranus", filename: "uranus.map");
            //

            //Mostrar no ecrã os resultados
            Console.WriteLine("Name              Filename      Sucess Rate    Top Score");
            Console.WriteLine("--------------------------------------------------------");

            for (int i = 0; i < gamemaparray.Length; i++) {
                string showname = string.Format("{0,0}", gamemaparray[i].Name);
                string showfilename = string.Format("{0,22}", gamemaparray[i].Filename);
                string showsuccessrate = string.Format("{0,12:p1}", gamemaparray[i].SuccessRate);
                string showtopscore = string.Format("{0,13:F3}", gamemaparray[i].TopScore);
                Console.WriteLine(showname + showfilename + showsuccessrate + showtopscore);
            }
            //
        }
    }
}

```
*Por [Francisco Pires](https://github.com/FRP7)*
