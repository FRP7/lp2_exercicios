## Pergunta

18 - Considera a seguinte classe:

```cs
public class Weapon
{
    public float AttackPower { get; }
    public float Durability { get; }

    public Weapon(float attackPower, float durability)
    {
        AttackPower = attackPower;
        Durability = durability;
    }
}
```

Assume que temos uma lista de armas, ou seja, uma variável do tipo
`List<Weapon>` e responde às seguintes questões:

1. Faz as alterações necessárias à classe `Weapon` de modo a que quando
invocarmos o método
[`Sort`](https://docs.microsoft.com/dotnet/api/system.collections.generic.list-1.sort)
(ou mais concretamente, o seu
[_overload_ sem parâmetros](https://docs.microsoft.com/dotnet/api/system.collections.generic.list-1.sort#System_Collections_Generic_List_1_Sort)) da classe `List<T>`, as instâncias de `Weapon` fiquem ordenadas por
`AttackPower` decrescente. _Sugestão:_ a classe `Weapon` tem de implementar
[`IComparable<T>`](https://docs.microsoft.com/pt-pt/dotnet/api/system.icomparable-1).
2. Cria uma classe `Program` com um método `Main()` para testar uma lista de
várias instâncias de `Weapon`, nomeadamente a sua ordenação por `AttackPower`
decrescente usando o método
[`Sort()`](https://docs.microsoft.com/dotnet/api/system.collections.generic.list-1.sort#System_Collections_Generic_List_1_Sort)
sem parâmetros.
3. O método
[`Sort`](https://docs.microsoft.com/dotnet/api/system.collections.generic.list-1.sort)
da classe `List<T>` tem vários _overloads_. Um deles,
[`Sort(IComparer<T>)`](https://docs.microsoft.com/dotnet/api/system.collections.generic.list-1.sort#System_Collections_Generic_List_1_Sort_System_Collections_Generic_IComparer__0__),
permite ordenar a lista usando o critério de ordenação definido numa classe
extra. Tal classe, como indicado na assinatura do método, tem de implementar a
interface
[`IComparer<T>`](https://docs.microsoft.com/dotnet/api/system.collections.generic.icomparer-1).
Cria uma classe deste tipo cujo critério de ordenação seja `Durability`
crescente.
4. Adiciona ao método `Main()` da classe `Program` um teste à ordenação
por `Durability` crescente usando o método
[`Sort(IComparer<T>)`](https://docs.microsoft.com/dotnet/api/system.collections.generic.list-1.sort#System_Collections_Generic_List_1_Sort_System_Collections_Generic_IComparer__0__)
e a classe desenvolvida no ponto anterior.

## Soluções

### Solução 1

1. Classe `Weapon`:

```cs
public class Weapon : IComparable<Weapon>
{
    public float AttackPower { get; }
    public float Durability { get; }

    public Weapon(float attackPower, float durability)
    {
        AttackPower = attackPower;
        Durability = durability;
    }

    public int CompareTo(Weapon w2)
    {
        if (w2 == null) return 1;
        if (w2.AttackPower - AttackPower > 0) return 1;
        if (w2.AttackPower - AttackPower < 0) return -1;
        return 0;
    }

    public override string ToString() => $"Attack Power: {AttackPower}" +
        $"\tDurability: {Durability}";
}
```

2. Classe `Program`:
   
```cs
class Program
{
    static void Main(string[] args)
    {
        List<Weapon> weaponsList = new List<Weapon>()
        {
            new Weapon(132.23f, 100),
            new Weapon(50.5f, 100),
            null,
            new Weapon(10.7f, 100),
            new Weapon(102.34f, 100),
            new Weapon(243.9f, 100),
            new Weapon(150.7f, 100),
            null,
            new Weapon(31.9f, 100),
            new Weapon(92.4f, 100)
        };

        Console.WriteLine("Unsorted List:");
        foreach(Weapon w in weaponsList) Console.WriteLine(w);

        weaponsList.Sort();

        Console.WriteLine("\nSorted List:");
        foreach (Weapon w in weaponsList) Console.WriteLine(w);
    }
}
```

3. Classe `WeaponComparer`:

```cs
public class WeaponComparer : IComparer<Weapon>
{
    public int Compare(Weapon w1, Weapon w2)
    {
        if (w1 == w2) return 0;
        if (w1 == null) return -1;
        if (w2 == null) return 1;
        if (w1.Durability - w2.Durability > 0) return 1;
        if (w1.Durability - w2.Durability < 0) return -1;
        return 0;
    }
}
```

4. Class `Program` atualizada:

```cs
class Program
{
    static void Main(string[] args)
    {
        List<Weapon> weaponsList = new List<Weapon>()
        {
            new Weapon(132.23f, 100),
            new Weapon(50.5f, 100),
            null,
            new Weapon(10.7f, 100),
            new Weapon(102.34f, 100),
            new Weapon(243.9f, 100),
            new Weapon(150.7f, 100),
            null,
            new Weapon(31.9f, 100),
            new Weapon(92.4f, 100)
        };
        WeaponComparer wpnComp = new WeaponComparer();

        Console.WriteLine("Unsorted List:");
        foreach(Weapon w in weaponsList) Console.WriteLine(w);

        weaponsList.Sort();

        Console.WriteLine("\nSorted List:");
        foreach (Weapon w in weaponsList) Console.WriteLine(w);

        weaponsList.Sort(wpnComp);

        Console.WriteLine("\nSorted List (Durability):");
        foreach (Weapon w in weaponsList) Console.WriteLine(w);
    }
}
```

**Nota:** Código de teste para este exercício encontra-se neste
[repositório](https://github.com/PmaiWoW/LP2_Github_Exercises).

*Por [Pedro Inácio](https://github.com/PmaiWoW).*


### Solução 2

1. Classe Weapon:

```cs
using System;

namespace _01_18
{
    public class Weapon : IComparable<Weapon>
    {
        // Variável da AttackPower (só de leitura excepto no construtor).
        public float AttackPower { get; }
        //
        // Variável da Durability (só de leitura excepto no construtor).
        public float Durability { get; }
        //

        // Construtor que cria armas.
        public Weapon(float attackPower, float durability)
        {
            AttackPower = attackPower;
            Durability = durability;
        }
        //

        /*  Definir que o Sort() vai ordenar por ordem decrescente 
         *  pelo AttackPower
         */
        public int CompareTo(Weapon weapon)
        {
            int returnvalue = 0;
            if (AttackPower > weapon.AttackPower)
            {
                returnvalue = -1;
            }
            else if (AttackPower < weapon.AttackPower)
            {
                returnvalue = 1;
            }
            else if (weapon == null)
            {
                returnvalue = 1;
            }
            else
            {
                returnvalue = 0;
            }
            return returnvalue;
        }
        //
    }
}


```

2. Classe Program:
   
```cs
using System;
using System.Collections.Generic;

namespace _01_18
{
    class Program
    {
        // Aceder à classe Sort.
        private static CompareClass _sort = new CompareClass();
        //

        static void Main(string[] args)
        { 
             // Lista de Weapons.
            List<Weapon> weaponlist = new List<Weapon>();
            // 

            // O construtor constrói objetos que são colocados na lista.
            weaponlist.Add(new Weapon
                (1, 2f));
            weaponlist.Add(new Weapon
                (2, 3f));
            weaponlist.Add(new Weapon
                (3, 4f));
            //

            // Mostrar as Weapons por ordem decrescente pelo Attack Power.
            Console.WriteLine("Weapons por ordem decrescente pelo Attack Power");
            // Ordenar (ordem decrescente pelo AttackPower)
            weaponlist.Sort();
            //
            foreach (Weapon item in weaponlist)
            {
                Console.WriteLine($"Attack power: {item.AttackPower}");
                Console.WriteLine($"Durability: {item.Durability}");
            }
            //
            // Mostrar as Weapons por ordem crescente pela Durability.
            Console.WriteLine("Weapons por ordem crescente pela Durability");

            // Ordenar (ordem crescente pela Durability)
            weaponlist.Sort(_sort);
            //
            foreach (Weapon item in weaponlist)
            {
                Console.WriteLine($"Attack power: {item.AttackPower}");
                Console.WriteLine($"Durability: {item.Durability}");
            }
            //
        }
    }
}

```

3. Classe CompareWeapon:

```cs
using System;
using System.Collections.Generic;

namespace _01_18
{
    public class CompareWeapon : IComparer<Weapon>
    {
        // Definir que o Sort() ordena por ordem crescente pela Durability
        public int Compare(Weapon a, Weapon b)
        {
            int returnvalue = 0;

            if(a == null | b == null) {
                returnvalue = -1;
            } else {
                if (a.Durability > b.Durability) {
                    returnvalue = 1;
                } else if (a.Durability < b.Durability) {
                    returnvalue = -1;
                } else {
                    returnvalue = 0;
                }
            }
            return returnvalue;
        }
        //
    }
}

```

4. Class Program atualizada:

```cs
using System;
using System.Collections.Generic;

namespace _01_18
{
    class Program
    {
        // Aceder à classe Sort.
        private static CompareWeapon _compareweapon = new CompareWeapon();
        //

        static void Main(string[] args)
        { 
             // Lista de Weapons.
            List<Weapon> weaponlist = new List<Weapon>();
            // 

            // O construtor constrói objetos que são colocados na lista.
            weaponlist.Add(new Weapon
                (1, 2f));
            weaponlist.Add(new Weapon
                (2, 3f));
            weaponlist.Add(new Weapon
                (3, 4f));
            //

            // Mostrar as Weapons por ordem decrescente pelo Attack Power.
            Console.WriteLine("Weapons por ordem decrescente pelo Attack Power");
            // Ordenar (ordem decrescente pelo AttackPower)
            weaponlist.Sort();
            //
            foreach (Weapon item in weaponlist)
            {
                Console.WriteLine($"Attack power: {item.AttackPower}");
                Console.WriteLine($"Durability: {item.Durability}");
            }
            //
            // Mostrar as Weapons por ordem crescente pela Durability.
            Console.WriteLine("Weapons por ordem crescente pela Durability");

            // Ordenar (ordem crescente pela Durability)
            weaponlist.Sort(_compareweapon);
            //
            foreach (Weapon item in weaponlist)
            {
                Console.WriteLine($"Attack power: {item.AttackPower}");
                Console.WriteLine($"Durability: {item.Durability}");
            }
            //
        }
    }
}


```


*Por [Francisco Pires](https://github.com/FRP7).*