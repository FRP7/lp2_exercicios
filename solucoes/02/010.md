## Problema

10 - Considera a seguinte `struct`:

```cs
public struct TilePosition
{
    public static int XMax { get; internal set; }
    public static int YMax { get; internal set; }
    public int X { get; }
    public int Y { get; }
    public TilePosition(int x, int y)
    {
        // Código do construtor
    }
}
```

Responde às seguintes questões:

1. Adiciona o código ao construtor, de modo as propriedades `X` e `Y` sejam
   inicializadas com valores entre 0 e `XMax` ou `YMax`, conforme o caso. Se
   os parâmetros `x` e `y` estiverem fora do respetivo intervalo, deve ser
   lançada a exceção `InvalidTilePositionException`, que aceita como argumentos
   dois `bools`, que indiquem respetivamente se os parâmetros `x` e `y` são
   inválidos.
2. Cria a classe `InvalidTilePositionException`, fazendo _override_ da
   propriedade `Message` de modo a que indique quais os argumentos inválidos
   (`x`, `y` ou ambos).
3. Na classe `Program`, método `Main()`, testa as várias possibilidades
   (parâmetros válidos, um parâmetro inválido, ambos os parâmetros inválidos),
   capturando devidamente a exceção.

## Soluções

### Solução 1

1. Modificações no construtor da `struct` `TilePosition`:

```csharp
namespace Ex_10
{
    public struct TilePosition
    {
        public static int XMax { get; internal set; }
        public static int YMax { get; internal set; }
        public int X { get; }
        public int Y { get; }

        static TilePosition()
        {
            XMax = 100;
            YMax = 100;
        }

        public TilePosition(int x, int y)
        {
            bool xValid, yValid;
            xValid = x >= 0 && x <= XMax;
            yValid = y >= 0 && y <= YMax;

            if (!xValid || !yValid)
            {
                throw new InvalidTilePositionException(xValid, yValid);
            }

            X = x;
            Y = y;
        }
    }
}
```

2. Exceção `InvalidTilePositionException`:

```csharp
using System;

namespace Ex_10
{
    public class InvalidTilePositionException : Exception
    {
        private string sb;

        public override string Message => sb;

        public InvalidTilePositionException(bool x, bool y)
        {
            sb = "";

            if (!x)
            {
                sb += $"X value is invalid!. ";
            }

            if (!y)
            {
                sb += $"Y value is invalid!. ";
            }
        }
    }
}
```

3. Teste do programa dentro da função `Main()`:

```csharp
using System;

namespace Ex_10
{
    class Program
    {
        static void Main(string[] args)
        {
            try
            {
                TilePosition desertTile = new TilePosition(0, 0);
                
            }
            catch(InvalidTilePositionException e)
            {
                Console.WriteLine(e.Message);
            }

            try
            {
                TilePosition iceTile = new TilePosition(21, 124);
            }
            catch (InvalidTilePositionException e)
            {
                Console.WriteLine(e.Message);
            }

            try
            {
                TilePosition forestTile = new TilePosition(-20, 110);
            }
            catch (InvalidTilePositionException e)
            {
                Console.WriteLine(e.Message);
            }
        }
    }
}
```
*Output* na consola deste teste é o seguinte:

```
Y value is invalid!.

X value is invalid!. Y value is invalid!
```


### Solução 2

1. 

```csharp
 public struct TilePosition
    {
        // Propriedade que define limite máximo do X.
        public static int XMax { get; internal set; }
        //
        // Propriedade que define limite máximo do Y.
        public static int YMax { get; internal set; }
        //
        // Propriedade de leitura que define o valor do X.
        public int X { get; }
        //
        // Propriedade de leitura que define o valor do Y.
        public int Y { get; }
        //

        /// <summary>
        /// Construtor de TilePosition.
        /// </summary>
        /// <param name="x"> Definir o valor de X. </param>
        /// <param name="y"> Definir o valor de Y. </param>
        public TilePosition(int x, int y) {
            // Definir os valores do XMax e YMax.
            XMax = 5;
            YMax = 5;
            //

            // Definir que os valores X e Y são iguais aos dos parâmetros.
            X = x;
            Y = y;
            //

            /* Variáveis bool que verificam se os valores de X e Y 
             * respeitam os limites. */
            bool isX = true;
            bool isY = true;
            //

            // Verificar se X respeita os limites.
            if(X >= 0 && X <= XMax) {
                isX = true;
            }
            else {
                isX = false;
            }
            //

            // Verificar se Y respeita os limites.
            if (Y >= 0 && Y <= YMax) {
                isY = true;
            }
            else {
                isY = false;
            }
            //

            // Verificar se pelo menos um dos bools é falso.
            if (isX == false || isY == false) {
                throw new InvalidTilePositionException(isX, isY);
            } 
            //
        }
        //
    }
```

2.

```csharp
using System;
using System.Collections.Generic;
using System.Text;

namespace _02_10
{
    public class InvalidTilePositionException : Exception
    {
        // Variável string com o texto a mostrar na mensagem de erro.
        private string finalmessage;
        //
        // Fazer override da Mensagem mãe com a finalmessage.
        public override string Message => finalmessage;
        //

        /// <summary>
        /// Construtor de InvalidTilePositionException.
        /// </summary>
        /// <param name="x"> Valor de isX. </param>
        /// <param name="y"> Valor de isY. </param>
        public InvalidTilePositionException(bool x, bool y) {
            if(x == false) {
                finalmessage = "O X está fora do intervalo";
            }
            if (y == false) {
                finalmessage = "O Y está fora do intervalo";
            }
            if (x == false && y == false) {
                finalmessage = "O Y e o X estão fora do intervalo";
            }
        }
        //
    }
}

```

3.

```csharp
using System;

namespace _02_10
{
    class Program
    {
        static void Main(string[] args) {
            // Experimentar os valores.
            try {
                TilePosition tileposition1 = new TilePosition(3, 3);
            }
            catch(InvalidTilePositionException msg) {
                Console.WriteLine(msg.Message);
            }

            try {
                TilePosition tileposition1 = new TilePosition(6, 3);
            }
            catch (InvalidTilePositionException msg) {
                Console.WriteLine(msg.Message);
            }

            try {
                TilePosition tileposition1 = new TilePosition(3, 6);
            }
            catch (InvalidTilePositionException msg) {
                Console.WriteLine(msg.Message);
            }

            try {
                TilePosition tileposition1 = new TilePosition(6, 6);
            }
            catch (InvalidTilePositionException msg) {
                Console.WriteLine(msg.Message);
            }
            //
        }
    }
}

```
Resultado:

```
O X está fora do intervalo
O Y está fora do intervalo
O Y e o X estão fora do intervalo
```

*Por [Francisco Pires](https://github.com/FRP7)*